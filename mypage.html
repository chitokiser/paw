<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <meta name="description" content="Paw DAO · My Page"/>
  <link rel="shortcut icon" href="../images/logo.png"/>
  <title>Paw DAO · My Page</title>

  <!-- Bootstrap (single) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"/>

  <!-- Site base CSS -->
  <link rel="stylesheet" href="/css/main.css"/>

  <!-- ⚠️ Scoped styles: only affect .mypage-scope -->
  <style>
    .mypage-scope .card { border-radius: 16px; }
    .mypage-scope .card-header { border-top-left-radius: 16px; border-top-right-radius: 16px; }
    .mypage-scope .list-group-item { font-size: 15px; }
    .mypage-scope .btn { min-height: 44px; border-radius: 12px; font-weight: 600; }
    .mypage-scope .progress { height: 12px; border-radius: 10px; }
    .mypage-scope #LevelBar { transition: width .3s ease; }

    /* Mobile stack buttons */
    @media (max-width: 576px) {
      .mypage-scope .stack-sm > * { width: 100% !important; margin: .25rem 0 !important; }
      .mypage-scope .btn-lg-sm { padding: .9rem 1rem; font-size: 1rem; }
      .mypage-scope .list-group-item { font-size: 14px; }
    }
  </style>
</head>
<body>

  <!-- header from dashboard.html -->
  <div id="menu-placeholder" class="mb-3"></div>

  <div class="container mypage-scope py-3 px-3">
    <div class="card shadow-sm">
      <div class="card-header text-center bg-light">
        <h5 class="m-0">My Page</h5>
      </div>
      <div class="card-body text-center">

        <ul class="list-group mb-3">
          <li class="list-group-item">
            Click <strong>[Connection Wallet &gt; sign up]</strong> in the upper right menu,<br/>
            enter the referrer's address, and sign up to become level 1.
          </li>
        </ul>

        <div class="mb-3">
          <button class="btn btn-outline-success w-100 btn-lg-sm" onclick="MemberLogin()">Wallet Connection</button>
        </div>

        <ul class="list-group mb-3 text-start">
          <li class="list-group-item d-flex justify-content-between"><span>MyPAW</span><span><strong id="Mypaw">-</strong> PAW</span></li>
          <li class="list-group-item d-flex justify-content-between"><span>MyPUP</span><span><strong id="Mypup">-</strong> PUP</span></li>
          <li class="list-group-item d-flex justify-content-between"><span>Level</span><span id="Mylev">-</span></li>
          <li class="list-group-item d-flex justify-content-between"><span>Experience</span><span id="Exp">-</span></li>
          <li class="list-group-item d-flex justify-content-between"><span>EXP to Level Up</span><span id="Expneeded">-</span></li>
          <li class="list-group-item d-flex justify-content-between"><span>GamePoints</span><span id="Mypoint">-</span></li>
          <li class="list-group-item d-flex justify-content-between"><span>Mentor</span><span id="Mymento">-</span></li>

          <li class="list-group-item">
            <div class="d-grid gap-2 d-md-flex align-items-center">
              <button class="btn btn-outline-dark position-relative btn-lg-sm" onclick="Levelup()">
                Level Up
                <span class="badge bg-dark position-absolute top-0 start-100 translate-middle" id="Mylev2">-</span>
              </button>
              <div class="progress flex-grow-1">
                <div class="progress-bar progress-bar-striped bg-success" id="LevelBar" role="progressbar"
                     aria-valuemin="0" aria-valuemax="100" style="width:0%"></div>
              </div>
            </div>
          </li>
        </ul>

        <p class="text-danger fw-bold mb-3 text-start">Pup Number of exchanges = GamePoint * level / 1000</p>

        <div class="d-flex stack-sm justify-content-between mb-3">
          <button class="btn btn-outline-success w-100 btn-lg-sm" onclick="Bonuswithdraw()">Game point change (PUP Token)</button>
          <button class="btn btn-outline-primary w-100 btn-lg-sm" id="fetchAddresses" onclick="fetchAddresses()">The member who recommended me</button>
        </div>

        <ul id="addressList" class="list-group text-start mb-4"></ul>

        <div class="mt-3">
          <button class="btn btn-outline-warning w-100 btn-lg-sm" onclick="Buff()">5000GP + 5000EXP Free (1 time)</button>
        </div>

        <hr class="my-4"/>

        <h6 class="fw-bold text-start">Recharge game points</h6>
        <input type="number" id="Amount" class="form-control mb-2"
               placeholder="Enter PAW token 1 PAW = 1000 GP"
               inputmode="numeric" pattern="[0-9]*" min="1" step="1" required/>
        <button id="chargeButton" class="btn btn-primary w-100 btn-lg-sm">Charge</button>
        <p id="resultMessage" class="mt-3 text-center text-success"></p>

        <div id="tokenLogoContainer" class="mt-3"></div>
      </div>
    </div>
  </div>

  <!-- footer -->
  <div id="footer" class="container-fluid px-0 mt-4"></div>

  <!-- scripts (single copies) -->
  <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <!-- app scripts -->
  <script defer src="../src/topinfo.js"></script>
  <script defer src="../src/mypage.js"></script>

  <!-- fetch header/footer after DOM ready -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      fetch('dashboard.html')
        .then(r => r.text())
        .then(html => { document.getElementById('menu-placeholder').innerHTML = html; })
        .catch(err => console.error('Error loading dashboard:', err));

      fetch('../footer.html')
        .then(r => r.text())
        .then(html => { document.getElementById('footer').innerHTML = html; })
        .catch(err => console.error('Error loading footer:', err));
    });

    window.addEventListener('load', () => {
      if (typeof topData === 'function') topData();
    });
  </script>
</body>
</html>
