<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <meta name="description" content="PAW DAO - PuppyLotto"/>
  <link rel="shortcut icon" href="../images/logo.png"/>
  <title>PuppyLotto · PAW DAO</title>

  <!-- Bootstrap (single) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"/>

  <!-- (옵션) 사이트 공통 CSS가 있다면 유지 -->
  <link rel="stylesheet" href="/css/main.css"/>

<style id="contrast-boost">
  :root{ --bg:#0a0f1a; --panel:#0f172a; --ink:#ffffff; --muted:#d1d5db; }

  /* 바탕과 기본 글자색 고정 */
  .pl-scope, body.pl-scope{ background:var(--bg) !important; color:var(--ink) !important; }

  /* 카드/섹션을 어두운 불투명 배경으로 통일 */
  .pl-scope .card,
  .pl-scope .card-header,
  .pl-scope .card-body,
  .pl-scope .bg-white,
  .pl-scope .bg-light,
  .pl-scope .list-group-item,
  .pl-scope .alert,
  .pl-scope .collapse,
  .pl-scope .dropdown-menu{
    background:var(--panel) !important;
    border:1px solid rgba(255,255,255,.22) !important;
    color:var(--ink) !important;
  }

  /* 모든 텍스트를 강하게(흐릿한 파스텔 제거) */
  .pl-scope .card *:not(.btn):not(.badge),
  .pl-scope .container *:not(.btn):not(.badge){
    color:var(--ink) !important;
    text-shadow:none !important;
  }
  .pl-scope .text-muted, .pl-scope .text-secondary{ color:var(--muted) !important; }

  /* 혹시 상위에 opacity/filter 걸려있어도 무력화 */
  .pl-scope, .pl-scope *{ opacity:1 !important; filter:none !important; mix-blend-mode:normal !important; }
  .pl-scope [style*="opacity:"]{ opacity:1 !important; }

  /* 입력창/셀렉트도 가독성 높이기 */
  .pl-scope .form-control, .pl-scope .form-select{
    background:rgba(255,255,255,.10) !important;
    border:1px solid rgba(255,255,255,.28) !important;
    color:var(--ink) !important;
  }
  .pl-scope .form-control::placeholder{ color:var(--muted) !important; opacity:1; }

  /* 버튼 대비 강화 */
  .pl-scope .btn{ min-height:44px; border-radius:12px; font-weight:800; }
  .pl-scope .btn-outline-primary,
  .pl-scope .btn-outline-secondary,
  .pl-scope .btn-outline-light{
    color:#ffffff !important; border-color:#ffffff !important; background:transparent !important;
  }
  .pl-scope .btn-success{ background:#16a34a !important; border-color:#16a34a !important; color:#fff !important; }

  /* 제목 더 굵게 */
  .pl-scope h1,.pl-scope h2,.pl-scope h3,.pl-scope h4,.pl-scope h5{ font-weight:900 !important; }

  /* 이모지 선택 버튼도 대비 업 */
  .pl-scope .emoji-btn{
    background:rgba(255,255,255,.15) !important;
    border:1px solid rgba(255,255,255,.32) !important;
    color:#fff !important;
  }
  .pl-scope .emoji-btn.selected{
    background:#22d3ee !important; border-color:#22d3ee !important; color:#0a0f1a !important;
  }

  /* 상단 숫자 강조 */
  #Jack, #Wid{ font-weight:900 !important; letter-spacing:.3px; }
</style>




</head>
<body>

  <div class="container py-3">

    <!-- Header / Controls -->
    <div class="card mb-3">
      <div class="card-body d-flex flex-wrap align-items-center justify-content-between gap-2">
        <div class="d-flex align-items-center gap-2">
          <img src="../images/logo.png" style="width:28px;height:28px;object-fit:contain" alt="logo"/>
          <div class="h5 mb-0">PuppyLotto</div>
        </div>
        <div class="stack-sm d-flex align-items-center">
          <a href="../p2e/WithPuppy.html" class="btn btn-outline-info">🏠 Puppy Home</a>
          <button id="btnConnect" class="btn btn-outline-light">🔌 Connect Wallet</button>
          <button id="btnRefresh" class="btn btn-outline-secondary">↻ Refresh</button>
        </div>
      </div>
    </div>

    <!-- Lotto Intro + Top stats -->
    <div class="card mb-3">
      <div class="card-header"><strong>About PuppyLotto</strong></div>
      <div class="card-body">
        <p class="mb-1">• Match <strong>5 numbers</strong> in <strong>6 attempts</strong>. Order does not matter.</p>
        <p class="mb-1">• Each submission costs <strong>100 GP</strong>.</p>
        <p class="mb-1">• Each number is a value <strong>1 to 10</strong>.</p>
        <p class="mb-3">• Solve within 6 attempts and get the <strong>Jackpot (GP)</strong>.</p>

        <div class="row g-3">
          <div class="col-12 col-sm-6">
            <div class="p-3 rounded" style="border:1px dashed var(--border);">
              <div class="mini">Jackpot (GP)</div>
              <div class="h4 mb-0"><span id="Jack">…</span></div>
            </div>
          </div>
          <div class="col-12 col-sm-6">
            <div class="p-3 rounded" style="border:1px dashed var(--border);">
              <div class="mini">Total Games</div>
              <div class="h4 mb-0"><span id="Wid">…</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Staff: Create Game -->
    <div class="card mb-3">
      <div class="card-header d-flex align-items-center justify-content-between">
        <strong>Staff</strong>
        <span class="badge-soft px-2 py-1">Authorized only</span>
      </div>
      <div class="card-body">
        <button class="btn btn-outline-light w-100 mb-3" type="button" data-bs-toggle="collapse" data-bs-target="#createGameSection" aria-expanded="false" aria-controls="createGameSection">
          🎮 Create New Game
        </button>

        <div class="collapse" id="createGameSection">
          <div class="p-3 rounded" style="border:1px dashed var(--border);">
            <div class="row g-2 mb-2">
              <div class="col"><input type="number" id="num1" class="form-control text-center" placeholder="#1" min="1" max="10"/></div>
              <div class="col"><input type="number" id="num2" class="form-control text-center" placeholder="#2" min="1" max="10"/></div>
              <div class="col"><input type="number" id="num3" class="form-control text-center" placeholder="#3" min="1" max="10"/></div>
              <div class="col"><input type="number" id="num4" class="form-control text-center" placeholder="#4" min="1" max="10"/></div>
              <div class="col"><input type="number" id="num5" class="form-control text-center" placeholder="#5" min="1" max="10"/></div>
            </div>
            <button class="btn btn-success w-100" onclick="CreateGame()">✅ Create Game</button>
            <div id="statusMessage" class="mini mt-2 text-warning"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Game List -->
    <div class="card mb-3">
      <div class="card-header"><strong>Game List</strong></div>
      <div class="card-body" id="gameList">⏳ Loading…</div>
    </div>

    <!-- Log -->
    <div class="card mb-4">
      <div class="card-header"><strong>Log</strong></div>
      <div class="card-body">
        <div id="log">Ready.</div>
      </div>
    </div>

  </div>

  <!-- Vendor JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

  <!-- Page Logic -->
  <script src="../src/PawLotto.js"></script>

  <script>
    // Convenience: Connect / Refresh buttons
    document.getElementById('btnConnect')?.addEventListener('click', () => window.PawLotto?.connectWallet?.());
    document.getElementById('btnRefresh')?.addEventListener('click', () => window.PawLotto?.refresh?.());
  </script>
</body>
</html>
