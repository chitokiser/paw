<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PAW DAO</title>
  <link rel="shortcut icon" href="../images/logo.png" />
  <link 
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" 
    rel="stylesheet" 
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" 
    crossorigin="anonymous"
  >
  <!-- 커스텀 스타일 -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/puppywith.css">
</head>
<body>

  <!-- 네비게이션 바 삽입 -->
  <div id="menu-placeholder"></div>
<script>
  fetch('../dashboard.html')
    .then(res => {
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      return res.text();
    })
    .then(html => {
      const menu = document.getElementById('menu-placeholder');
      // 1) 마크업 삽입
      menu.innerHTML = html;
      // 2) 삽입된 네비 내부의 .container 찾아서 .container-fluid 로 교체, 패딩 제거
      menu.querySelectorAll('.navbar .container').forEach(c => {
        c.classList.remove('container');
        c.classList.add('container-fluid', 'px-0');
      });
      // 3) 스크립트 로드
      const s = document.createElement('script');
      s.src = '../src/topinfo.js';
      s.onload = () => typeof topData === 'function' && topData();
      document.body.appendChild(s);
    })
    .catch(err => console.error('Error loading dashboard:', err));
</script>


  <!-- 페이지 콘텐츠 -->
  <div class="container my-4">
    <!-- PuppyZum Description Card -->
    <div class="card mb-4">
      <div class="card-header bg-light">
        <h5 class="mb-0">WithPuppy (only game point)</h5>
      </div>
      <div class="card-body">
        <p>You need <strong>1000GP</strong> to create my puppy</p>
        <p>You can earn <strong>GP</strong> by using my puppy</p>
        <p>If you improve my puppy's stats, you will receive additional bonus GP</p>
        <p>Feeding will randomly improve stats <strong>(Consumes -500GP)</strong></p>
      </div>
    </div>

    <!-- My Puppy: Create & Feed -->
    <div class="card mb-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <p class="mb-0 fw-bold">[My Puppy] Create & Feed (1 per account)</p>
        <button 
          class="btn btn-outline-secondary btn-sm" 
          type="button" 
          data-bs-toggle="collapse" 
          data-bs-target="#myPuppyContent" 
          aria-expanded="true" 
          aria-controls="myPuppyContent"
        >Toggle</button>
      </div>
      <div id="myPuppyContent" class="collapse show">
        <div class="card-body">
          <label for="puppyName" class="form-label fw-bold">Enter Puppy Name</label>
          <input 
            type="text" 
            id="puppyName" 
            class="form-control mb-3" 
            placeholder="Enter your puppy name"
          >
          <button id="mintBtn" class="btn btn-primary w-100 mb-2">
            Create My Puppy (-1000GP)
          </button>

          <div id="myPuppyImage" class="text-center mt-4">
            <button onclick="loadMyPuppyImage()" class="btn btn-outline-info">
              MyPuppy
            </button>
            <div class="img-container mt-2">
              <img 
                id="puppyImg" 
                class="puppy-img" 
                style="display:none;" 
                src="" 
                alt="My Puppy"
              />
            </div>
            <div id="puppyInfo" class="mt-2"></div>
          </div>

          <h6 class="fw-bold mt-4">Play</h6>
           <div id="status" class="status-box"></div>
          <div class="d-flex gap-2 flex-wrap mb-3">
            <button 
              type="button" 
              onclick="feedMyPuppy()" 
              class="btn btn-outline-success flex-fill"
            >🍖 Feeding (-500GP)</button>
          </div>
          <div class="d-flex gap-2 flex-wrap">
            <a href="PuppyWar.html"      class="btn btn-outline-primary flex-fill">⚔️ PuppyWar</a>
            <a href="PuppyLotto.html"    class="btn btn-outline-warning flex-fill">🎲 PuppyLotto</a>
            <a href="PuppyRescue.html"   class="btn btn-outline-danger flex-fill">🐾 PuppyRescue</a>
            <a href="HiPuppy.html"       class="btn btn-outline-primary flex-fill">🧬 HiPuppy</a>
            <a href="PuppyRace.html"     class="btn btn-outline-warning flex-fill">🏁 Race</a>
            <a href="PuppyBattle.html"   class="btn btn-outline-danger flex-fill">⚡ Battle</a>
            <a href="PuppyHunt.html"     class="btn btn-outline-dark flex-fill">🎯 Hunt</a>
            <a href="../geolocation/geohome.html" class="btn btn-outline-dark flex-fill">📍 Location</a>
          </div>
         
        </div>
      </div>
    </div>

    <!-- Puppy List -->
    <div class="text-center my-5">
      <h2>Puppy List (<span id="totalPid">0</span>)</h2>
    </div>
    <div class="grid" id="list"></div>
  </div>

  <!-- 푸터 삽입 -->
  <div id="footer"></div>
  <script>
    fetch('../footer.html')
      .then(r=>r.text())
      .then(html=>{
        document.getElementById('footer').innerHTML = html;
        const f = document.createElement('script');
        f.src = '../src/footer.js';
        document.body.appendChild(f);
      })
      .catch(e=>console.error(e));
  </script>

  <!-- Bootstrap & Libraries -->
  <script 
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" 
    crossorigin="anonymous">
  </script>
  <script 
    src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.2.0/ethers.umd.min.js" 
    crossorigin="anonymous">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="../src/WithPuppy.js"></script>

